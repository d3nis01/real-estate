<div class="listing-page-container" *ngIf="listing">
  <div class="lp-header">
    <div class="lp-header-left">
      <div class="lp-header-left-title">{{ listing.title }}</div>
      <div class="lp-header-left-location">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="18"
          height="21"
          viewBox="0 0 18 21"
          fill="none"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M8.53975 20.851C8.56995 20.8685 8.59369 20.8821 8.6105 20.8915L8.63843 20.9071C8.8613 21.0294 9.13776 21.0285 9.36084 20.9075L9.3895 20.8915C9.40631 20.8821 9.43005 20.8685 9.46025 20.851C9.52066 20.816 9.60697 20.765 9.7155 20.6982C9.93246 20.5646 10.2388 20.3676 10.6046 20.1091C11.3351 19.5931 12.3097 18.8274 13.2865 17.8273C15.2307 15.8368 17.25 12.8462 17.25 9C17.25 4.44365 13.5563 0.75 9 0.75C4.44365 0.75 0.75 4.44365 0.75 9C0.75 12.8462 2.76932 15.8368 4.71346 17.8273C5.69025 18.8274 6.66491 19.5931 7.39539 20.1091C7.76125 20.3676 8.06754 20.5646 8.2845 20.6982C8.39303 20.765 8.47934 20.816 8.53975 20.851ZM9 12C10.6569 12 12 10.6569 12 9C12 7.34315 10.6569 6 9 6C7.34315 6 6 7.34315 6 9C6 10.6569 7.34315 12 9 12Z"
            fill="black"
          />
        </svg>
        {{ listing.city }}, {{ listing.country }}
      </div>
    </div>
    <div class="lp-header-right">${{ listing.budget | number : "1.0-0" }}</div>
  </div>
  <div class="lp-image-container">
    <img
      class="lp-image"
      [src]="listing.image || 'assets/images/placeholder.png'"
      alt="{{ listing.title }}"
    />
  </div>
  <div class="lp-top-container">
    <div class="lp-top-left-container">
      <div class="lp-text-container">
        <div class="lp-title">Description</div>
        <div class="lp-description">
          {{ listing.description }}
        </div>
      </div>
      <div class="separator"></div>

      <div class="flex justify-between items-center gap-2 pl-4 pr-4">
        <div class="flex flex-col gap-2">
          <div class="text-md text-primary font-bold">Project Type</div>
          <div class="text-sm text-foreground">{{ listing.projectType }}</div>
        </div>
        <div class="flex flex-col gap-2">
          <div class="text-md text-primary font-bold">Status</div>
          <div class="text-sm text-foreground">{{ listing.status }}</div>
        </div>
        <div class="flex flex-col gap-2">
          <div class="text-md text-primary font-bold">Deadline</div>
          <div class="text-sm text-foreground">
            {{ listing.constructionDeadline | date : "longDate" }}
          </div>
        </div>
      </div>
    </div>
    <div class="lp-top-right-container">
      <div class="lp-title">Key Features and Amenities</div>
      <div class="flex flex-col gap-3 w-full">
        <!-- Dynamically loaded features -->
        <div
          class="lp-feature-container"
          *ngFor="let feature of listing?.blueprint?.split(',')"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="18"
            height="21"
            viewBox="0 0 18 21"
            fill="none"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M11.6152 0.0949212C11.9165 0.262864 12.0643 0.614596 11.9736 0.947333L9.98195 8.25H17.25C17.5487 8.25 17.8189 8.42718 17.9379 8.70108C18.0569 8.97499 18.0021 9.29341 17.7983 9.51173L7.29831 20.7617C7.06298 21.0139 6.68604 21.073 6.38481 20.9051C6.08357 20.7371 5.9357 20.3854 6.02644 20.0527L8.01808 12.75H0.750016C0.451369 12.75 0.181182 12.5728 0.062156 12.2989C-0.0568695 12.025 -0.00204775 11.7066 0.201725 11.4883L10.7017 0.238256C10.937 -0.0138767 11.314 -0.0730214 11.6152 0.0949212Z"
              fill="black"
            />
          </svg>
          {{ feature }}
        </div>

        <!-- Static features -->
        <div class="lp-feature-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="18"
            height="21"
            viewBox="0 0 18 21"
            fill="none"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M11.6152 0.0949212C11.9165 0.262864 12.0643 0.614596 11.9736 0.947333L9.98195 8.25H17.25C17.5487 8.25 17.8189 8.42718 17.9379 8.70108C18.0569 8.97499 18.0021 9.29341 17.7983 9.51173L7.29831 20.7617C7.06298 21.0139 6.68604 21.073 6.38481 20.9051C6.08357 20.7371 5.9357 20.3854 6.02644 20.0527L8.01808 12.75H0.750016C0.451369 12.75 0.181182 12.5728 0.062156 12.2989C-0.0568695 12.025 -0.00204775 11.7066 0.201725 11.4883L10.7017 0.238256C10.937 -0.0138767 11.314 -0.0730214 11.6152 0.0949212Z"
              fill="black"
            />
          </svg>
          Created on: {{ listing.createdAt | date : "longDate" }}
        </div>

        <div class="lp-feature-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="18"
            height="21"
            viewBox="0 0 18 21"
            fill="none"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M11.6152 0.0949212C11.9165 0.262864 12.0643 0.614596 11.9736 0.947333L9.98195 8.25H17.25C17.5487 8.25 17.8189 8.42718 17.9379 8.70108C18.0569 8.97499 18.0021 9.29341 17.7983 9.51173L7.29831 20.7617C7.06298 21.0139 6.68604 21.073 6.38481 20.9051C6.08357 20.7371 5.9357 20.3854 6.02644 20.0527L8.01808 12.75H0.750016C0.451369 12.75 0.181182 12.5728 0.062156 12.2989C-0.0568695 12.025 -0.00204775 11.7066 0.201725 11.4883L10.7017 0.238256C10.937 -0.0138767 11.314 -0.0730214 11.6152 0.0949212Z"
              fill="black"
            />
          </svg>
          Location: {{ listing.city }}, {{ listing.country }}
        </div>

        <div class="lp-feature-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="18"
            height="21"
            viewBox="0 0 18 21"
            fill="none"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M11.6152 0.0949212C11.9165 0.262864 12.0643 0.614596 11.9736 0.947333L9.98195 8.25H17.25C17.5487 8.25 17.8189 8.42718 17.9379 8.70108C18.0569 8.97499 18.0021 9.29341 17.7983 9.51173L7.29831 20.7617C7.06298 21.0139 6.68604 21.073 6.38481 20.9051C6.08357 20.7371 5.9357 20.3854 6.02644 20.0527L8.01808 12.75H0.750016C0.451369 12.75 0.181182 12.5728 0.062156 12.2989C-0.0568695 12.025 -0.00204775 11.7066 0.201725 11.4883L10.7017 0.238256C10.937 -0.0138767 11.314 -0.0730214 11.6152 0.0949212Z"
              fill="black"
            />
          </svg>
          Budget: ${{ listing.budget | number : "1.0-0" }}
        </div>

        <div class="lp-feature-container">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="18"
            height="21"
            viewBox="0 0 18 21"
            fill="none"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M11.6152 0.0949212C11.9165 0.262864 12.0643 0.614596 11.9736 0.947333L9.98195 8.25H17.25C17.5487 8.25 17.8189 8.42718 17.9379 8.70108C18.0569 8.97499 18.0021 9.29341 17.7983 9.51173L7.29831 20.7617C7.06298 21.0139 6.68604 21.073 6.38481 20.9051C6.08357 20.7371 5.9357 20.3854 6.02644 20.0527L8.01808 12.75H0.750016C0.451369 12.75 0.181182 12.5728 0.062156 12.2989C-0.0568695 12.025 -0.00204775 11.7066 0.201725 11.4883L10.7017 0.238256C10.937 -0.0138767 11.314 -0.0730214 11.6152 0.0949212Z"
              fill="black"
            />
          </svg>
          Verified by Admin
        </div>
      </div>
    </div>
  </div>
  <div class="flex items-center justify-center gap-3">
    <button
      *ngIf="userHasCompany"
      mat-flat-button
      (click)="goToOfferPage()"
      class="send-offer-btn"
    >
      Send an offer
    </button>
    <button mat-flat-button (click)="goToAllOffers()" class="send-offer-btn">
      View all offers
    </button>
  </div>
</div>
