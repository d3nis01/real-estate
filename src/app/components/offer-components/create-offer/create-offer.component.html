<div class="create-offer-page">
  <div class="create-offer">
    <div class="nav-bar">
      <ul>
        <li>
          <button mat-raised-button color="primary" (click)="goToListingPage()">
            Back to listing
          </button>
        </li>
      </ul>
    </div>

    <h2>Create Offer</h2>

    <form
      [formGroup]="offerForm"
      (ngSubmit)="onSubmit()"
      class="form-container"
    >
      <div class="fields-wrapper">
        <!-- Column 1 -->
        <div class="form-group">
          <mat-form-field appearance="fill" class="full-width">
            <mat-label>Price</mat-label>
            <input matInput type="number" formControlName="price" />
            <mat-error *ngIf="offerForm.get('price')?.errors?.['required']">
              Price is required.
            </mat-error>
            <mat-error *ngIf="offerForm.get('price')?.errors?.['min']">
              Price must be greater than zero.
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill" class="full-width">
            <mat-label>Offer Document URL</mat-label>
            <input matInput formControlName="offerDocument" />
            <mat-error
              *ngIf="offerForm.get('offerDocument')?.errors?.['maxlength']"
            >
              URL must not exceed 2048 characters.
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill" class="full-width">
            <mat-label>Status</mat-label>
            <mat-select formControlName="status">
              <mat-option
                *ngFor="let status of offerStatusOptions"
                [value]="status"
              >
                {{ status }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="offerForm.get('status')?.errors?.['required']">
              Status is required.
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Column 2 -->
        <div class="form-group">
          <mat-form-field appearance="fill" class="full-width">
            <mat-label>Deadline</mat-label>
            <input matInput type="date" formControlName="deadline" />
            <mat-error *ngIf="offerForm.get('deadline')?.errors?.['required']">
              Deadline is required.
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill" class="full-width">
            <mat-label>Description</mat-label>
            <textarea matInput formControlName="description"></textarea>
            <mat-error
              *ngIf="offerForm.get('description')?.errors?.['required']"
            >
              Description is required.
            </mat-error>
            <mat-error
              *ngIf="offerForm.get('description')?.errors?.['maxlength']"
            >
              Must not exceed 500 characters.
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <div class="buttons-wrapper">
        <button
          mat-raised-button
          color="primary"
          type="submit"
          [disabled]="offerForm.invalid || isSubmitting"
        >
          {{ isSubmitting ? "Creating..." : "Create Offer" }}
        </button>
      </div>
    </form>
  </div>
</div>
