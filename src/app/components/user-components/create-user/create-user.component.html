<div class="create-user-page">
  <div class="create-user">
    <div class="nav-bar">
      <ul>
        <li>
          <a (click)="goToAllUsers()" routerLink="/get-all-users">
            Back to Users List
          </a>
        </li>
      </ul>
    </div>

    <h2 class="text-xxl font-bold">Create User</h2>

    <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="form-container">
      <div class="fields-wrapper">
        <!-- Username -->
        <div class="form-group">
          <label for="username">Username</label>
          <input id="username" formControlName="username" type="text" />
          <small
            *ngIf="
              userForm.get('username')?.invalid &&
              userForm.get('username')?.touched
            "
            class="error"
          >
            <span *ngIf="userForm.get('username')?.errors?.['required']">
              Username is required.
            </span>
            <span *ngIf="userForm.get('username')?.errors?.['minlength']">
              Username must be at least 3 characters long.
            </span>
            <span *ngIf="userForm.get('username')?.errors?.['maxlength']">
              Username must not exceed 50 characters.
            </span>
            <span *ngIf="userForm.get('username')?.errors?.['unique']">
              Username must be unique.
            </span>
          </small>
        </div>

        <!-- Password -->
        <div class="form-group">
          <label for="password">Password</label>
          <input id="password" formControlName="password" type="password" />
          <small
            *ngIf="
              userForm.get('password')?.invalid &&
              userForm.get('password')?.touched
            "
            class="error"
          >
            <span *ngIf="userForm.get('password')?.errors?.['required']">
              Password is required.
            </span>
            <span *ngIf="userForm.get('password')?.errors?.['minlength']">
              Password must be at least 6 characters long.
            </span>
          </small>
        </div>

        <!-- First Name -->
        <div class="form-group">
          <label for="firstName">First Name</label>
          <input id="firstName" formControlName="firstName" type="text" />
          <small
            *ngIf="
              userForm.get('firstName')?.invalid &&
              userForm.get('firstName')?.touched
            "
            class="error"
          >
            <span *ngIf="userForm.get('firstName')?.errors?.['required']">
              First name is required.
            </span>
            <span *ngIf="userForm.get('firstName')?.errors?.['maxlength']">
              First name must not exceed 50 characters.
            </span>
          </small>
        </div>

        <!-- Last Name -->
        <div class="form-group">
          <label for="lastName">Last Name</label>
          <input id="lastName" formControlName="lastName" type="text" />
          <small
            *ngIf="
              userForm.get('lastName')?.invalid &&
              userForm.get('lastName')?.touched
            "
            class="error"
          >
            <span *ngIf="userForm.get('lastName')?.errors?.['required']">
              Last name is required.
            </span>
            <span *ngIf="userForm.get('lastName')?.errors?.['maxlength']">
              Last name must not exceed 50 characters.
            </span>
          </small>
        </div>

        <!-- Email -->
        <div class="form-group">
          <label for="email">Email</label>
          <input id="email" formControlName="email" type="email" />
          <small
            *ngIf="
              userForm.get('email')?.invalid && userForm.get('email')?.touched
            "
            class="error"
          >
            <span *ngIf="userForm.get('email')?.errors?.['required']">
              Email is required.
            </span>
            <span *ngIf="userForm.get('email')?.errors?.['email']">
              Invalid email format.
            </span>
          </small>
        </div>

        <!-- Phone Number -->
        <div class="form-group">
          <label for="phoneNumber">Phone Number</label>
          <input id="phoneNumber" formControlName="phoneNumber" type="text" />
          <small
            *ngIf="
              userForm.get('phoneNumber')?.invalid &&
              userForm.get('phoneNumber')?.touched
            "
            class="error"
          >
            <span *ngIf="userForm.get('phoneNumber')?.errors?.['required']">
              Phone number is required.
            </span>
            <span *ngIf="userForm.get('phoneNumber')?.errors?.['pattern']">
              Phone number must be between 7 and 15 digits.
            </span>
          </small>
        </div>

        <!-- City -->
        <div class="form-group">
          <label for="city">City</label>
          <input id="city" formControlName="city" type="text" />
          <small
            *ngIf="
              userForm.get('city')?.invalid && userForm.get('city')?.touched
            "
            class="error"
          >
            <span *ngIf="userForm.get('city')?.errors?.['required']">
              City is required.
            </span>
            <span *ngIf="userForm.get('city')?.errors?.['maxlength']">
              City must not exceed 100 characters.
            </span>
          </small>
        </div>

        <!-- Country -->
        <div class="form-group">
          <label for="country">Country</label>
          <input id="country" formControlName="country" type="text" />
          <small
            *ngIf="
              userForm.get('country')?.invalid &&
              userForm.get('country')?.touched
            "
            class="error"
          >
            <span *ngIf="userForm.get('country')?.errors?.['required']">
              Country is required.
            </span>
            <span *ngIf="userForm.get('country')?.errors?.['maxlength']">
              Country must not exceed 100 characters.
            </span>
          </small>
        </div>

        <!-- User Type -->
        <div class="form-group">
          <label for="userType">User Type</label>
          <select id="userType" formControlName="userType">
            <option *ngFor="let type of userTypeOptions" [value]="type">
              {{ type }}
            </option>
          </select>
        </div>
      </div>

      <!-- Buttons -->
      <div class="buttons-wrapper">
        <button
          class="btn-submit"
          type="submit"
          [disabled]="userForm.invalid || isSubmitting"
        >
          {{ isSubmitting ? "Creating..." : "Create User" }}
        </button>
      </div>
    </form>
  </div>
</div>
